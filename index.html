<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <title>Corrida Pisquila</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <style>
    * { margin: 0; padding: 0; box-sizing: border-box; }
    body { background: #111; overflow: hidden; user-select: none; }

    #game {
      width: 400px;
      height: 600px;
      margin: 20px auto;
      background: #1e1e1e;
      position: relative;
      border: 3px solid white;
      overflow: hidden;
    }

    #carro {
      width: 50px;
      height: 100px;
      background: #3498db;
      position: absolute;
      bottom: 20px;
      left: 175px;
      border-radius: 10px;
    }

    .obstaculo {
      width: 50px;
      height: 100px;
      background: #e74c3c;
      position: absolute;
      top: -100px;
      left: 0;
      border-radius: 10px;
    }

    #pontos, #vidas {
      position: absolute;
      top: 10px;
      left: 10px;
      color: white;
      font-family: Arial, sans-serif;
      font-size: 16px;
    }

    #vidas {
      left: auto;
      right: 10px;
    }

    /* Botões para celular */
    .botao {
      width: 50%;
      height: 60px;
      background: rgba(255,255,255,0.05);
      color: white;
      font-size: 30px;
      border: none;
      position: fixed;
      bottom: 0;
    }

    #esquerda {
      left: 0;
    }

    #direita {
      right: 0;
    }

    @media (min-width: 500px) {
      .botao { display: none; }
    }
  </style>
</head>
<body>
  <div id="game">
    <div id="carro"></div>
    <div id="pontos">Pontos: 0</div>
    <div id="vidas">Vidas: 3</div>
  </div>

  <!-- Controles para celular -->
  <button class="botao" id="esquerda">⏪</button>
  <button class="botao" id="direita">⏩</button>

  <script>
    const game = document.getElementById('game');
    const carro = document.getElementById('carro');
    const pontos = document.getElementById('pontos');
    const vidasDisplay = document.getElementById('vidas');
    let posicaoCarro = 175;
    let score = 0;
    let vidas = 3;

    function moverCarro(direcao) {
      if (direcao === 'esquerda' && posicaoCarro > 0) {
        posicaoCarro -= 25;
      } else if (direcao === 'direita' && posicaoCarro < 350) {
        posicaoCarro += 25;
      }
      carro.style.left = posicaoCarro + 'px';
    }

    document.addEventListener('keydown', (e) => {
      if (e.key === 'ArrowLeft') moverCarro('esquerda');
      if (e.key === 'ArrowRight') moverCarro('direita');
    });

    // Controles mobile
    document.getElementById('esquerda').addEventListener('click', () => moverCarro('esquerda'));
    document.getElementById('direita').addEventListener('click', () => moverCarro('direita'));

    function criarObstaculo() {
      const obstaculo = document.createElement('div');
      obstaculo.classList.add('obstaculo');

      const left = Math.floor(Math.random() * 8) * 50;
      obstaculo.style.left = left + 'px';
      obstaculo.style.background = '#' + Math.floor(Math.random()*16777215).toString(16); // cor aleatória

      game.appendChild(obstaculo);
      let topPos = -100;

      const intervalo = setInterval(() => {
        topPos += 5;
        obstaculo.style.top = topPos + 'px';

        const obstaculoX = obstaculo.offsetLeft;
        const obstaculoY = topPos;
        const carroX = carro.offsetLeft;
        const carroY = carro.offsetTop;

        const colisao = (
          obstaculoY + 100 > carroY &&
          obstaculoY < carroY + 100 &&
          obstaculoX === carroX
        );

        if (colisao) {
          vidas--;
          vidasDisplay.innerText = 'Vidas: ' + vidas;
          clearInterval(intervalo);
          obstaculo.remove();

          if (vidas <= 0) {
            alert('Game Over! Pontuação: ' + score);
            window.location.reload();
          }

        } else if (topPos > 600) {
          clearInterval(intervalo);
          obstaculo.remove();
          score++;
          pontos.innerText = 'Pontos: ' + score;
        }
      }, 20);
    }

    setInterval(criarObstaculo, 1500);
  </script>
</body>
</html>
